#!/bin/bash

set -e

if [ "${1}" == "up" ]
then
  amixer -q set Master 2%+ unmute
elif [ "${1}" == "down" ]
then
  amixer -q set Master 2%- unmute
fi

VOL=$(amixer get Master | tail -1 | sed 's/.*\[\([0-9]*%\)\].*/\1/')
ACPI=$([ $(which acpi 2>/dev/null) ] && acpi -b || true)

xsetroot -name "${ACPI}[${VOL}]"
